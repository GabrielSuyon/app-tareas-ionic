<ion-content>
  <app-header title="Nueva contraseña"></app-header>

  <div class="ion-padding ion-text-center">

    <!-- ÉXITO -->
    <div *ngIf="success" style="margin-top: 40px;">
      <ion-icon name="checkmark-circle-outline" style="font-size: 80px; color: #2dd36f"></ion-icon>
      <h2>¡Contraseña actualizada!</h2>
      <p>Serás redirigido al login en unos segundos...</p>
    </div>

    <!-- FORMULARIO -->
    <div *ngIf="!success" style="max-width: 400px; margin: 40px auto;">
      <h2>Escribe tu nueva contraseña</h2>

      <app-custom-input
        [control]="form.controls.password"
        type="password"
        label="Nueva contraseña"
        icon="lock-closed-outline">
      </app-custom-input>
      <div class="validators" *ngIf="form.controls.password.errors && form.controls.password.touched">
        <div *ngIf="form.controls.password.errors?.['required']">Ingresa tu nueva contraseña</div>
        <div *ngIf="form.controls.password.errors?.['minlength']">Mínimo 6 caracteres</div>
      </div>

      <app-custom-input
        [control]="form.controls.confirm"
        type="password"
        label="Confirmar contraseña"
        icon="lock-closed-outline">
      </app-custom-input>
      <div class="validators" *ngIf="form.controls.confirm.errors && form.controls.confirm.touched">
        <div *ngIf="form.controls.confirm.errors?.['required']">Confirma tu contraseña</div>
      </div>

      <p *ngIf="errorMsg" style="color: #eb445a;">{{ errorMsg }}</p>

      <ion-button expand="block" mode="ios" (click)="submit()" [disabled]="loading" style="margin-top: 20px;">
        <ion-spinner *ngIf="loading" name="crescent"></ion-spinner>
        <span *ngIf="!loading">Guardar contraseña</span>
      </ion-button>
    </div>

  </div>
</ion-content>